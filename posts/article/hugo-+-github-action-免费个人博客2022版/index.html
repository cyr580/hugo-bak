<!doctype html><html lang=en-us dir=ltr>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="https://blog.csdn.net/wolanx/article/details/122857729  Intro #  免费个人博客 的教程非常的 多，但大多面向 纯小白，反而对有一定基础的同学显得 落后 + 啰嗦，本文整合目前已知最好的方式，最快捷优雅的搞定一个博客，并给出 常见错误。
知识点 #   hugo 的安装及使用不是本文重点，其实同理 hexo git github 默认已掌握 github page 生成可访问的页面的 灵魂 所在 github action 自动生成上一步  完整链路解析 #   git commit 提交 触发 github action .github/workflows/my-pipeline.yml 并满足设置中的 on 条件 触发 pipeline 中的 steps  checkout：相当与 git clone，并且后续操作具有 github 完整权限，可以通过 permissions 设置 setup hugo：准备构建要求，安装对应版本，注意是否需要 extended build：构建出静态文件，并输出到 public 文件夹 deploy：该插件来自 插件市场  自动创建分支 gh-pages 自动 copy public 到新分支 自动提交 自动生成 CNAME 文件，根据 cname 设置，想要 自定义域名 的注意这里了     打开 https://github.">
<meta name=theme-color content="#FFFFFF">
<meta name=color-scheme content="light dark"><meta property="og:title" content="hugo + github action 免费个人博客【2022版】">
<meta property="og:description" content="https://blog.csdn.net/wolanx/article/details/122857729  Intro #  免费个人博客 的教程非常的 多，但大多面向 纯小白，反而对有一定基础的同学显得 落后 + 啰嗦，本文整合目前已知最好的方式，最快捷优雅的搞定一个博客，并给出 常见错误。
知识点 #   hugo 的安装及使用不是本文重点，其实同理 hexo git github 默认已掌握 github page 生成可访问的页面的 灵魂 所在 github action 自动生成上一步  完整链路解析 #   git commit 提交 触发 github action .github/workflows/my-pipeline.yml 并满足设置中的 on 条件 触发 pipeline 中的 steps  checkout：相当与 git clone，并且后续操作具有 github 完整权限，可以通过 permissions 设置 setup hugo：准备构建要求，安装对应版本，注意是否需要 extended build：构建出静态文件，并输出到 public 文件夹 deploy：该插件来自 插件市场  自动创建分支 gh-pages 自动 copy public 到新分支 自动提交 自动生成 CNAME 文件，根据 cname 设置，想要 自定义域名 的注意这里了     打开 https://github.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://wolanx.com/posts/article/hugo-+-github-action-%E5%85%8D%E8%B4%B9%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A22022%E7%89%88/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2022-02-11T17:44:26+08:00">
<meta property="article:modified_time" content="2022-02-11T17:44:26+08:00">
<title>hugo + github action 免费个人博客【2022版】 | wolanx</title>
<link rel=manifest href=/manifest.json>
<link rel=icon href=/favicon.png type=image/x-icon>
<link rel=stylesheet href=/book.min.82c5dbd23447cee0b4c2aa3ed08ce0961faa40e1fa370eee4f8c9f02e0d46b5f.css integrity="sha256-gsXb0jRHzuC0wqo+0Izglh+qQOH6Nw7uT4yfAuDUa18=" crossorigin=anonymous>
<script defer src=/flexsearch.min.js></script>
<script defer src=/en.search.min.627ac2074de3361c936578c43c72784fd9093971154510b10c0fba3478a16bc3.js integrity="sha256-YnrCB03jNhyTZXjEPHJ4T9kJOXEVRRCxDA+6NHiha8M=" crossorigin=anonymous></script>
</head>
<body dir=ltr>
<input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control>
<main class="container flex">
<aside class=book-menu>
<div class=book-menu-content>
<nav>
<h2 class=book-brand>
<a class="flex align-center" href=/><span>wolanx</span>
</a>
</h2>
<div class=book-search>
<input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/>
<div class="book-search-spinner hidden"></div>
<ul id=book-search-results></ul>
</div>
<ul>
<li>
<a href=/posts/>
Blog
</a>
</li>
<li>
<a href=/projects/>
Project
</a>
</li>
</ul>
</nav>
<script>(function(){var a=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(b){localStorage.setItem("menu.scrollTop",a.scrollTop)}),a.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>
</div>
</aside>
<div class=book-page>
<header class=book-header>
<div class="flex align-center justify-between">
<label for=menu-control>
<img src=/svg/menu.svg class=book-icon alt=Menu>
</label>
<strong>hugo + github action 免费个人博客【2022版】</strong>
<label for=toc-control>
<img src=/svg/toc.svg class=book-icon alt="Table of Contents">
</label>
</div>
<aside class="hidden clearfix">
<nav id=TableOfContents>
<ul>
<li><a href=#intro>Intro</a></li>
<li><a href=#知识点>知识点</a></li>
<li><a href=#完整链路解析>完整链路解析</a></li>
<li><a href=#步骤1hugo-github>步骤1：hugo github</a>
<ul>
<li><a href=#步骤11-创建-仓库--初始化-hugo>步骤1.1: 创建 仓库 & 初始化 hugo</a></li>
<li><a href=#步骤12-创建-gitmodules-文件>步骤1.2: 创建 .gitmodules 文件</a></li>
</ul>
</li>
<li><a href=#步骤2github-action-自动生成>步骤2：github action 自动生成</a>
<ul>
<li><a href=#步骤21-创建-githubworkflowsmy-pipelineyml>步骤2.1: 创建 .github/workflows/my-pipeline.yml</a></li>
</ul>
</li>
<li><a href=#步骤3github-page-页面生成>步骤3：github page 页面生成</a></li>
<li><a href=#源码参考>源码参考</a></li>
<li><a href=#总结>总结</a></li>
</ul>
</nav>
</aside>
</header>
<article class=markdown>
<h1>
<a href=/posts/article/hugo-+-github-action-%E5%85%8D%E8%B4%B9%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A22022%E7%89%88/>hugo + github action 免费个人博客【2022版】</a>
</h1>
<h5>2022-02-11 17:44:26</h5>
<div>
<a href=/categories/csdn/>csdn</a>
</div>
<blockquote>
<p><a href=https://blog.csdn.net/wolanx/article/details/122857729 target=_blank>https://blog.csdn.net/wolanx/article/details/122857729</a>
</p>
</blockquote>
<h2 id=intro>
Intro
<a class=anchor href=#intro>#</a>
</h2>
<p>免费个人博客 的教程非常的 <code>多</code>，但大多面向 <code>纯小白</code>，反而对有一定基础的同学显得 <code>落后 + 啰嗦</code>，本文整合目前已知最好的方式，最快捷优雅的搞定一个博客，并给出 <code>常见错误</code>。</p>
<h2 id=知识点>
知识点
<a class=anchor href=#%e7%9f%a5%e8%af%86%e7%82%b9>#</a>
</h2>
<ul>
<li><input disabled type=checkbox> hugo 的安装及使用不是本文重点，其实同理 hexo</li>
<li><input disabled type=checkbox> git github 默认已掌握</li>
<li><input checked disabled type=checkbox> github page 生成可访问的页面的 <code>灵魂</code> 所在</li>
<li><input checked disabled type=checkbox> github action <code>自动生成</code>上一步</li>
</ul>
<h2 id=完整链路解析>
完整链路解析
<a class=anchor href=#%e5%ae%8c%e6%95%b4%e9%93%be%e8%b7%af%e8%a7%a3%e6%9e%90>#</a>
</h2>
<ul>
<li>git commit 提交</li>
<li>触发 github action <code>.github/workflows/my-pipeline.yml</code> 并满足设置中的 <code>on</code> 条件</li>
<li>触发 pipeline 中的 steps
<ul>
<li>checkout：相当与 git clone，并且后续操作具有 github 完整权限，可以通过 permissions 设置</li>
<li>setup hugo：准备构建要求，安装对应版本，注意是否需要 extended</li>
<li>build：构建出静态文件，并输出到 public 文件夹</li>
<li>deploy：该插件来自 <a href="https://github.com/marketplace?type=actions&query=hugo+" target=_blank>插件市场</a>
<ul>
<li>自动创建分支 gh-pages</li>
<li>自动 copy public 到新分支</li>
<li>自动提交</li>
<li>自动生成 CNAME 文件，根据 cname 设置，想要 <code>自定义域名</code> 的注意这里了</li>
</ul>
</li>
</ul>
</li>
<li>打开 <code>https://github.com/{你的名字}/{你的仓库}/settings/pages</code>（后续步骤只需要一次）
<ul>
<li><code>Source</code> 选择 gh-pages ，文件夹: 默认 / (root) ，并 save</li>
<li>注意上方提示 <code>Your site is ready to be published at</code> <a href=https://xxx.github.io/xxx/ target=_blank>https://xxx.github.io/xxx/</a>
</li>
<li>将域名部分做 <code>解析</code></li>
<li><code>Custom domain</code> 设置 自己的域名</li>
<li><code>Enforce HTTPS</code> 点一下，然后等一会</li>
</ul>
</li>
</ul>
<h2 id=步骤1hugo-github>
步骤1：hugo github
<a class=anchor href=#%e6%ad%a5%e9%aa%a41hugo-github>#</a>
</h2>
<h3 id=步骤11-创建-仓库--初始化-hugo>
步骤1.1: 创建 仓库 & 初始化 hugo
<a class=anchor href=#%e6%ad%a5%e9%aa%a411-%e5%88%9b%e5%bb%ba-%e4%bb%93%e5%ba%93--%e5%88%9d%e5%a7%8b%e5%8c%96-hugo>#</a>
</h3>
<blockquote>
<p>hugo github 的基本操作不是本文重点，忽略</p>
</blockquote>
<h3 id=步骤12-创建-gitmodules-文件>
步骤1.2: 创建 .gitmodules 文件
<a class=anchor href=#%e6%ad%a5%e9%aa%a412-%e5%88%9b%e5%bb%ba-gitmodules-%e6%96%87%e4%bb%b6>#</a>
</h3>
<p>hugo 的 主题 themes 是通过 git 的 sub modules 实现，而 github 上 git 会自动根据 <code>.gitmodules</code> clone 子项目。没有 .gitmodules 文件会导致构建失败。
比如我的主题使用的是 hugo-book（推荐），那么配置如下</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>[submodule &#34;themes/hugo-book&#34;]
	path = themes/hugo-book
	url = https://github.com/alex-shpak/hugo-book
</code></pre></div><h2 id=步骤2github-action-自动生成>
步骤2：github action 自动生成
<a class=anchor href=#%e6%ad%a5%e9%aa%a42github-action-%e8%87%aa%e5%8a%a8%e7%94%9f%e6%88%90>#</a>
</h2>
<p>官方默认的 Jekyll 其实是会根据分支 <code>自动</code> 构建发布的，但如果自己魔改使用 <code>hugo | hexo</code> 这类软件以后就不会自动，需要使用 action 功能，而 action 其实就是 github 的 pipeline版本，使用只需要一个文件 <code>.github/workflows/my-pipeline.yml</code>。其中可能需要改的：</p>
<ul>
<li>main 分支 根据实际情况改一下</li>
<li>cname 最后一行 如果要使用自定义域名功能</li>
</ul>
<h3 id=步骤21-创建-githubworkflowsmy-pipelineyml>
步骤2.1: 创建 .github/workflows/my-pipeline.yml
<a class=anchor href=#%e6%ad%a5%e9%aa%a421-%e5%88%9b%e5%bb%ba-githubworkflowsmy-pipelineyml>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>name</span>: <span style=color:#ae81ff>my-pipeline</span>

<span style=color:#f92672>on</span>:
  <span style=color:#f92672>push</span>:
    <span style=color:#f92672>tags</span>:
      - <span style=color:#e6db74>&#39;*&#39;</span>
    <span style=color:#f92672>branches</span>:
      - <span style=color:#ae81ff>main</span>

<span style=color:#f92672>env</span>:
  <span style=color:#f92672>REGISTRY</span>: <span style=color:#ae81ff>ghcr.io</span>
  <span style=color:#f92672>IMAGE_NAME</span>: <span style=color:#ae81ff>${{ github.repository }}</span>

<span style=color:#f92672>jobs</span>:
  <span style=color:#f92672>build</span>:
    <span style=color:#f92672>runs-on</span>: <span style=color:#ae81ff>ubuntu-latest</span>
    <span style=color:#75715e># permissions:</span>
    <span style=color:#75715e>#   contents: read</span>
    <span style=color:#75715e>#   packages: write</span>
    <span style=color:#f92672>concurrency</span>:
      <span style=color:#f92672>group</span>: <span style=color:#ae81ff>${{ github.workflow }}-${{ github.ref }}</span>

    <span style=color:#f92672>steps</span>:
      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>checkout</span>
        <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/checkout@v2</span>
        <span style=color:#f92672>with</span>:
          <span style=color:#f92672>submodules</span>: <span style=color:#66d9ef>true</span>  <span style=color:#75715e># Fetch Hugo themes (true OR recursive)</span>
          <span style=color:#f92672>fetch-depth</span>: <span style=color:#ae81ff>0</span>    <span style=color:#75715e># Fetch all history for .GitInfo and .Lastmod</span>

      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>setup hugo</span>
        <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>peaceiris/actions-hugo@v2</span>
        <span style=color:#f92672>with</span>:
          <span style=color:#f92672>hugo-version</span>: <span style=color:#e6db74>&#39;0.92.0&#39;</span>
          <span style=color:#f92672>extended</span>: <span style=color:#66d9ef>true</span>

      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>build</span>
        <span style=color:#f92672>run</span>: <span style=color:#ae81ff>hugo --minify</span>

      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>deploy</span>
        <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>peaceiris/actions-gh-pages@v3</span>
        <span style=color:#f92672>if</span>: <span style=color:#ae81ff>${{ github.ref == &#39;refs/heads/main&#39; }}</span>
        <span style=color:#f92672>with</span>:
          <span style=color:#f92672>github_token</span>: <span style=color:#ae81ff>${{ secrets.GITHUB_TOKEN }}</span>
          <span style=color:#f92672>publish_dir</span>: <span style=color:#ae81ff>./public</span>
          <span style=color:#75715e># cname: wolanx.com # 重点 ！！！</span>
</code></pre></div><h2 id=步骤3github-page-页面生成>
步骤3：github page 页面生成
<a class=anchor href=#%e6%ad%a5%e9%aa%a43github-page-%e9%a1%b5%e9%9d%a2%e7%94%9f%e6%88%90>#</a>
</h2>
<p>打开 <code>https://github.com/{你的名字}/{你的仓库}/settings/pages</code> , 设置</p>
<p><img src="https://img-blog.csdnimg.cn/661f9dea78c8461abb485588ff8c7a28.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAeXVqaWUuemhhbw==,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt=在这里插入图片描述></p>
<ul>
<li>没有 pages 功能：只有公开项目才有，<code>私有</code> 项目不支持</li>
<li>gh-pages 分支不存在：没有成功触发 action，成功触发，会自动生成分支 gh-pages，并将静态资源保存在 gh-pages 上</li>
<li>cname 一直被重置：.github/workflows/my-pipeline.yml 最后一行没有设置好</li>
<li>域名设置没用：需要先做 <code>域名解析</code>，如阿里云，参考如下，<code>记录值</code> 是 github page 页面上给出的值的域名部分，！！！域名部分！！！域名部分</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/5f10bc070aff4e89b5132b19d1701394.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAeXVqaWUuemhhbw==,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt=在这里插入图片描述></p>
<h2 id=源码参考>
源码参考
<a class=anchor href=#%e6%ba%90%e7%a0%81%e5%8f%82%e8%80%83>#</a>
</h2>
<ul>
<li><a href=https://github.com/wolanx/blog target=_blank>github.com/wolanx/blog</a>
</li>
<li><a href=https://wolanx.com target=_blank>成品</a>
</li>
</ul>
<h2 id=总结>
总结
<a class=anchor href=#%e6%80%bb%e7%bb%93>#</a>
</h2>
<p>2022年了，很多原本复杂的东西，都已经变得非常的容易获得，但网上的文章常年不升级。根据本文方便你更好的白嫖到一个免费博客，如果需要支持自定义域名，阿里云上购买也不到100RMB。</p>
</article>
<footer class=book-footer>
<div class="flex flex-wrap justify-between">
<div>
<a class="flex align-center" href=https://github.com/wolanx/blog/edit/main/content/posts/article/hugo%20+%20github%20action%20%e5%85%8d%e8%b4%b9%e4%b8%aa%e4%ba%ba%e5%8d%9a%e5%ae%a2%e3%80%902022%e7%89%88%e3%80%91.md target=_blank rel=noopener>
<img src=/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span>
</a>
</div>
</div>
<script>(function(){function a(c){const a=window.getSelection(),b=document.createRange();b.selectNodeContents(c),a.removeAllRanges(),a.addRange(b)}document.querySelectorAll("pre code").forEach(b=>{b.addEventListener("click",function(c){a(b.parentElement),navigator.clipboard&&navigator.clipboard.writeText(b.parentElement.textContent)})})})()</script>
</footer>
<div class=book-comments>
</div>
<label for=menu-control class="hidden book-menu-overlay"></label>
</div>
<aside class=book-toc>
<div class=book-toc-content>
<nav id=TableOfContents>
<ul>
<li><a href=#intro>Intro</a></li>
<li><a href=#知识点>知识点</a></li>
<li><a href=#完整链路解析>完整链路解析</a></li>
<li><a href=#步骤1hugo-github>步骤1：hugo github</a>
<ul>
<li><a href=#步骤11-创建-仓库--初始化-hugo>步骤1.1: 创建 仓库 & 初始化 hugo</a></li>
<li><a href=#步骤12-创建-gitmodules-文件>步骤1.2: 创建 .gitmodules 文件</a></li>
</ul>
</li>
<li><a href=#步骤2github-action-自动生成>步骤2：github action 自动生成</a>
<ul>
<li><a href=#步骤21-创建-githubworkflowsmy-pipelineyml>步骤2.1: 创建 .github/workflows/my-pipeline.yml</a></li>
</ul>
</li>
<li><a href=#步骤3github-page-页面生成>步骤3：github page 页面生成</a></li>
<li><a href=#源码参考>源码参考</a></li>
<li><a href=#总结>总结</a></li>
</ul>
</nav>
</div>
</aside>
</main>
</body>
</html>