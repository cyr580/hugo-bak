[{"id":0,"href":"/posts/docker/python.dockerfile/","title":"python Dockerfile","section":"Blog","content":"FROMpython:3.10.0-slimRUN sed -i \u0026#39;s/deb.debian.org/mirrors.aliyun.com/g\u0026#39; /etc/apt/sources.list \\  \u0026amp;\u0026amp; sed -i \u0026#39;s/security.debian.org/mirrors.aliyun.com/g\u0026#39; /etc/apt/sources.listRUN mkdir ~/.pip \\  \u0026amp;\u0026amp; echo \u0026#39;[global]\\n \\ trusted-host=mirrors.aliyun.com\\n \\ index-url=https://mirrors.aliyun.com/pypi/simple\\n \\ \u0026#39; \u0026gt; ~/.pip/pip.confRUN apt-get update -y \\  \u0026amp;\u0026amp; apt-get install -y gcc curl \\  \u0026amp;\u0026amp; apt-get install -y --no-install-recommends vim tree \\  \u0026amp;\u0026amp; rm -rf /var/lib/apt/lists/*RUN curl -s -L -o ~/rocketmq-client-cpp-2.0.0.amd64.deb \\  \u0026#39;https://github.com.cnpmjs.org/apache/rocketmq-client-cpp/releases/download/2.0.0/rocketmq-client-cpp-2.0.0.amd64.deb\u0026#39; \\  \u0026amp;\u0026amp; dpkg -i ~/rocketmq-client-cpp-2.0.0.amd64.deb \\  \u0026amp;\u0026amp; rm -f ~/rocketmq-client-cpp-2.0.0.amd64.debADD https://gfdcc-production-profile.oss-cn-shanghai.aliyuncs.com/profile/fonts/SourceHanSansCN-Normal.ttf /root/.fonts/ADD https://gfdcc-production-profile.oss-cn-shanghai.aliyuncs.com/profile/fonts/SourceHanSansCN-Bold.ttf /root/.fonts/RUN pip install --no-cache-dir --default-timeout=600 gunicorn==20.1.0 numpy==1.21.4 CPythonWORKDIR/www/backend-gimCOPY src/backend/requirements.txt .RUN pip install --no-cache-dir -r requirements.txt# todo#RUN apt-get -y --purge remove vim vim-runtime vim-common xxd cpp-8#RUN apt-get autoremove -yCMD [\u0026#34;gunicorn\u0026#34;, \u0026#34;run:app\u0026#34;, \u0026#34;-c\u0026#34;, \u0026#34;./gunicorn.conf.py\u0026#34;]# docker build -f __cicd__/gimc.rt.Dockerfile -t registry.cn-shanghai.aliyuncs.com/digital-web/gimc-rt:20211203-1148 ."},{"id":1,"href":"/posts/article/hugo-+-github-action-%E5%85%8D%E8%B4%B9%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A22022%E7%89%88/","title":"hugo + github action 免费个人博客【2022版】","section":"Blog","content":" https://blog.csdn.net/wolanx/article/details/122857729  Intro #  免费个人博客 的教程非常的 多，但大多面向 纯小白，反而对有一定基础的同学显得 落后 + 啰嗦，本文整合目前已知最好的方式，最快捷优雅的搞定一个博客，并给出 常见错误。\n知识点 #   hugo 的安装及使用不是本文重点，其实同理 hexo git github 默认已掌握 github page 生成可访问的页面的 灵魂 所在 github action 自动生成上一步  完整链路解析 #   git commit 提交 触发 github action .github/workflows/my-pipeline.yml 并满足设置中的 on 条件 触发 pipeline 中的 steps  checkout：相当与 git clone，并且后续操作具有 github 完整权限，可以通过 permissions 设置 setup hugo：准备构建要求，安装对应版本，注意是否需要 extended build：构建出静态文件，并输出到 public 文件夹 deploy：该插件来自 插件市场  自动创建分支 gh-pages 自动 copy public 到新分支 自动提交 自动生成 CNAME 文件，根据 cname 设置，想要 自定义域名 的注意这里了     打开 https://github.com/{你的名字}/{你的仓库}/settings/pages（后续步骤只需要一次）  Source 选择 gh-pages ，文件夹: 默认 / (root) ，并 save 注意上方提示 Your site is ready to be published at https://xxx.github.io/xxx/  将域名部分做 解析 Custom domain 设置 自己的域名 Enforce HTTPS 点一下，然后等一会    步骤1：hugo github #  步骤1.1: 创建 仓库 \u0026amp; 初始化 hugo #   hugo github 的基本操作不是本文重点，忽略\n 步骤1.2: 创建 .gitmodules 文件 #  hugo 的 主题 themes 是通过 git 的 sub modules 实现，而 github 上 git 会自动根据 .gitmodules clone 子项目。没有 .gitmodules 文件会导致构建失败。 比如我的主题使用的是 hugo-book（推荐），那么配置如下\n[submodule \u0026#34;themes/hugo-book\u0026#34;] path = themes/hugo-book url = https://github.com/alex-shpak/hugo-book 步骤2：github action 自动生成 #  官方默认的 Jekyll 其实是会根据分支 自动 构建发布的，但如果自己魔改使用 hugo | hexo 这类软件以后就不会自动，需要使用 action 功能，而 action 其实就是 github 的 pipeline版本，使用只需要一个文件 .github/workflows/my-pipeline.yml。其中可能需要改的：\n main 分支 根据实际情况改一下 cname 最后一行 如果要使用自定义域名功能  步骤2.1: 创建 .github/workflows/my-pipeline.yml #  name: my-pipeline on: push: tags: - \u0026#39;*\u0026#39; branches: - main env: REGISTRY: ghcr.io IMAGE_NAME: ${{ github.repository }} jobs: build: runs-on: ubuntu-latest # permissions: # contents: read # packages: write concurrency: group: ${{ github.workflow }}-${{ github.ref }} steps: - name: checkout uses: actions/checkout@v2 with: submodules: true # Fetch Hugo themes (true OR recursive) fetch-depth: 0 # Fetch all history for .GitInfo and .Lastmod - name: setup hugo uses: peaceiris/actions-hugo@v2 with: hugo-version: \u0026#39;0.92.0\u0026#39; extended: true - name: build run: hugo --minify - name: deploy uses: peaceiris/actions-gh-pages@v3 if: ${{ github.ref == \u0026#39;refs/heads/main\u0026#39; }} with: github_token: ${{ secrets.GITHUB_TOKEN }} publish_dir: ./public # cname: wolanx.com # 重点 ！！！ 步骤3：github page 页面生成 #  打开 https://github.com/{你的名字}/{你的仓库}/settings/pages , 设置\n 没有 pages 功能：只有公开项目才有，私有 项目不支持 gh-pages 分支不存在：没有成功触发 action，成功触发，会自动生成分支 gh-pages，并将静态资源保存在 gh-pages 上 cname 一直被重置：.github/workflows/my-pipeline.yml 最后一行没有设置好 域名设置没用：需要先做 域名解析，如阿里云，参考如下，记录值 是 github page 页面上给出的值的域名部分，！！！域名部分！！！域名部分  源码参考 #   github.com/wolanx/blog  成品   总结 #  2022年了，很多原本复杂的东西，都已经变得非常的容易获得，但网上的文章常年不升级。根据本文方便你更好的白嫖到一个免费博客，如果需要支持自定义域名，阿里云上购买也不到100RMB。\n"},{"id":2,"href":"/posts/article/logfmt-python-%E5%AE%9E%E7%8E%B0/","title":"logfmt python 实现","section":"Blog","content":" https://blog.csdn.net/wolanx/article/details/122733747  Intro #  现在很多主流日志系统推崇 logfmt 格式，但是 python 中配套的不多，这边给个参考\n日志大概长这样\n# log.info(\u0026#34;haha\u0026#34;) time=\u0026#34;2022-01-28T17:00:52+0800\u0026#34; type=default level=info method=\u0026#34;a.py:82\u0026#34; msg=\u0026#34;haha\u0026#34; # log.warning(\u0026#34;no access\u0026#34;) time=\u0026#34;2022-01-28T17:00:52+0800\u0026#34; type=default level=warning method=\u0026#34;a.py:83\u0026#34; msg=\u0026#34;no access\u0026#34; 实现过程 #   PiiLogger 继承 logging.Logger  绑定自定义的 formatter 清空原有 handler 否则会重复输出 把 formatter 注册给 handler hook 外层 变量 （如：每条log带上web请求的uuid）   PiiLoggerFormatter 继承 logging.Formatter  实现 format 的 自定义，内嵌变量请参考 官方 LogRecord 属性  hook 外层 变量    外层变量的使用 #  def getUUid(): v = None if has_request_context(): # 判断 flask web 的生命周期下 v = Pii.app.get(\u0026#34;uuid\u0026#34;, \u0026#34;\u0026#34;) # 根据自己业务写 return {\u0026#34;uuid\u0026#34;: v} log = PiiLogger.manager.getLogger(\u0026#34;default\u0026#34;) log.withFormatter(getUUid) log.info(\u0026#34;haha\u0026#34;) # time=\u0026#34;2022-01-29T10:38:21+0800\u0026#34; type=default level=info method=\u0026#34;views.request_after\u0026#34; uuid=\u0026#34;860ea870-80ac-11ec-a366-1eaadecc49e8\u0026#34; msg=\u0026#34;haha\u0026#34; 完整代码 #  import logging import numbers from json.encoder import JSONEncoder from typing import Any class PiiLogger(logging.Logger): def __init__(self, name: str, level=logging.NOTSET) -\u0026gt; None: super().__init__(name, level) self.setLevel(logging.INFO) self.root.handlers.clear() ch = logging.StreamHandler() ch.setLevel(logging.INFO) self.formatter = PiiLoggerFormatter( fmt=\u0026#39;time=\u0026#34;%(asctime)s\u0026#34; type=%(name)slevel=%(levelname)smethod=\u0026#34;%(method)s\u0026#34;\u0026#39;, datefmt=\u0026#34;%Y-%m-%dT%H:%M:%S%z\u0026#34;, ) ch.setFormatter(self.formatter) self.addHandler(ch) def withFields(self, ret): print(ret) return self def withFormatter(self, func): self.formatter.setExt(func) class PiiLoggerFormatter(logging.Formatter): ext: Any = None def format(self, record): if record.funcName == \u0026#34;\u0026lt;module\u0026gt;\u0026#34;: method = f\u0026#34;{record.filename}:{record.lineno}\u0026#34; else: method = f\u0026#34;{record.module}.{record.funcName}\u0026#34; record.__setattr__(\u0026#34;method\u0026#34;, method) record.levelname = record.levelname.lower() msg = JSONEncoder().encode(str(record.msg)) ret = super().format(record) if self.ext: mor = logfmt(self.ext()) if mor: ret += \u0026#34; \u0026#34; + mor return f\u0026#34;{ret}msg={msg}\u0026#34; def setExt(self, func): self.ext = func def logfmt(extra): outarr = [] for k, v in extra.items(): if v is None: outarr.append(\u0026#34;%s=\u0026#34; % k) continue if isinstance(v, bool): v = \u0026#34;true\u0026#34; if v else \u0026#34;false\u0026#34; elif isinstance(v, numbers.Number): pass else: if isinstance(v, (dict, object)): v = str(v) v = \u0026#39;\u0026#34;%s\u0026#34;\u0026#39; % v.replace(\u0026#39;\u0026#34;\u0026#39;, \u0026#39;\\\\\u0026#34;\u0026#39;) outarr.append(\u0026#34;%s=%s\u0026#34; % (k, v)) return \u0026#34; \u0026#34;.join(outarr) PiiLogger.manager.setLoggerClass(PiiLogger) if __name__ == \u0026#34;__main__\u0026#34;: # use log = PiiLogger.manager.getLogger(\u0026#34;default\u0026#34;) log.info(\u0026#34;haha\u0026#34;) log.warning(\u0026#34;no access\u0026#34;) "},{"id":3,"href":"/posts/article/python-%E4%BD%BF%E7%94%A8-reportlab-%E7%94%9F%E6%88%90-pdf/","title":"python 使用 reportlab 生成 pdf","section":"Blog","content":" https://blog.csdn.net/wolanx/article/details/122828185  Intro #  项目中遇到需要 导出统计报表 等业务时，通常需要 pdf 格式。python 中比较有名的就是 reportlab 。 这边通过几个小 demo 快速演示常用 api。所有功能点 源码 都在 使用场景。\n 一句话了解：跟 css 差不多，就是不断地对每样东西设置 style，然后把 style 和内容绑定。\n 功能点 #   生成  文件： 先 SimpleDocTemplate(\u0026lsquo;xxx.pdf\u0026rsquo;)，然后 build 流文件：先 io.BytesIO() 生成句柄，然后同理   曲线图 LinePlot 饼图 Pie 文字 Paragraph  fontSize 字体大小 推荐 14 加粗 \u0026lt;b\u0026gt;xxx\u0026lt;/b\u0026gt; 使用的是 html 的方式，字体自动实现 firstLineIndent 首行缩进 推荐 2 * fontSize leading 行间距 推荐 1.5 * fontSize fontName 默认中文会变成 ■  下载 .ttf 文件 至少2个 【常规】【加粗】 注册字体 pdfmetrics.registerFont 【常规】请用原名，方便加粗的实现 注册字体库 registerFontFamily(\u0026ldquo;HanSans\u0026rdquo;, normal=\u0026ldquo;HanSans\u0026rdquo;, bold=\u0026ldquo;HanSans-Bold\u0026rdquo;)       其他 api 自行摸索，但基本离不开 css 那种理念。官网并没有常规文档的那种 md 模式，而是完全写在了 pdf 里，玩家需要自己去 pdf 里像查字典一样去找。官方文档  预览 #  完整代码 #  import os from reportlab.graphics.charts.lineplots import LinePlot from reportlab.graphics.charts.piecharts import Pie from reportlab.graphics.shapes import Drawing from reportlab.lib import colors from reportlab.lib.styles import ParagraphStyle from reportlab.pdfbase import pdfmetrics from reportlab.pdfbase.pdfmetrics import registerFontFamily from reportlab.pdfbase.ttfonts import TTFont from reportlab.platypus import Paragraph home = os.path.expanduser(\u0026#34;~\u0026#34;) try: pdfmetrics.registerFont(TTFont(\u0026#34;HanSans\u0026#34;, f\u0026#34;{home}/.fonts/SourceHanSansCN-Normal.ttf\u0026#34;)) pdfmetrics.registerFont(TTFont(\u0026#34;HanSans-Bold\u0026#34;, f\u0026#34;{home}/.fonts/SourceHanSansCN-Bold.ttf\u0026#34;)) registerFontFamily(\u0026#34;HanSans\u0026#34;, normal=\u0026#34;HanSans\u0026#34;, bold=\u0026#34;HanSans-Bold\u0026#34;) FONT_NAME = \u0026#34;HanSans\u0026#34; except: FONT_NAME = \u0026#34;Helvetica\u0026#34; class MyCSS: h3 = ParagraphStyle(name=\u0026#34;h3\u0026#34;, fontName=FONT_NAME, fontSize=14, leading=21, alignment=1) p = ParagraphStyle(name=\u0026#34;p\u0026#34;, fontName=FONT_NAME, fontSize=12, leading=18, firstLineIndent=24) class PiiPdf: @classmethod def doH3(cls, text: str): return Paragraph(text, MyCSS.h3) @classmethod def doP(cls, text: str): return Paragraph(text, MyCSS.p) @classmethod def doLine(cls): drawing = Drawing(500, 220) line = LinePlot() line.x = 50 line.y = 50 line.height = 125 line.width = 300 line.lines[0].strokeColor = colors.blue line.lines[1].strokeColor = colors.red line.lines[2].strokeColor = colors.green line.data = [((0, 50), (100, 100), (200, 200), (250, 210), (300, 300), (400, 800))] drawing.add(line) return drawing @classmethod def doChart(cls, data): drawing = Drawing(width=500, height=200) pie = Pie() pie.x = 150 pie.y = 65 pie.sideLabels = False pie.labels = [letter for letter in \u0026#34;abcdefg\u0026#34;] pie.data = data # list(range(15, 105, 15)) pie.slices.strokeWidth = 0.5 drawing.add(pie) return drawing 使用场景1：生成文件 #  doc = SimpleDocTemplate(\u0026#34;Hello.pdf\u0026#34;) p = PiiPdf() doc.build([ p.doH3(\u0026#34;\u0026lt;b\u0026gt;水泵能源消耗简报\u0026lt;/b\u0026gt;\u0026#34;), p.doH3(\u0026#34;\u0026lt;b\u0026gt;2021.12.1 ~ 2021.12.31\u0026lt;/b\u0026gt;\u0026#34;), p.doP(\u0026#34;该月接入能耗管理系统水泵系统 xx 套，水泵 x 台。\u0026#34;), p.doP(\u0026#34;本月最大总功率 xx kW，环比上月增加 xx %，平均功率 xx kW；环比上月增加 xx %。\u0026#34;), p.doP(\u0026#34;功率消耗趋势图：\u0026#34;), p.doLine(), p.doP(\u0026#34;本月总能耗 xxx kWh，环比上月增加 xx %。\u0026#34;), p.doP(\u0026#34;分水泵能耗统计：\u0026#34;), p.doChart(list(range(15, 105, 20))), p.doP(\u0026#34;其中能耗最高的水泵为：xxx， 环比上月增加 xxx kWh，xx %。\u0026#34;), ]) 使用场景2：web（flask） #  @Controller.get(\u0026#34;/api/pdf\u0026#34;) def api_hub_energy_pdf(): buffer = io.BytesIO()\t# 重点 起一个 io doc = SimpleDocTemplate(buffer) p = PiiPdf() doc.build([ p.doH3(\u0026#34;\u0026lt;b\u0026gt;2021.12.1 ~ 2021.12.31\u0026lt;/b\u0026gt;\u0026#34;), ]) buffer.seek(0) return Response(\t# io 形式返回 buffer, mimetype=\u0026#34;application/pdf\u0026#34;, headers={\u0026#34;Content-disposition\u0026#34;: \u0026#34;inline; filename=test.pdf\u0026#34;}, ) "},{"id":4,"href":"/posts/other/5-key-area/","title":"5种底层能力","section":"Blog","content":" 真正厉害的工程师，都在修炼这5种底层能力 https://mp.weixin.qq.com/s/HpFS3jbmHPLKtdyNmflJZQ  6个职级 #   职级一共分六级\n  E1 - 助理工程师（Associate Engineer） E2 - 工程师（Engineer） E3 - 高级工程师（Senior Engineer） E4 - 资深工程师（Staff Engineer） E5 - 高级资深工程师（Senior Staff Engineer） E6 - 首席工程师（Principal Engineer）  5个关键区 #   评估的纬度共分5个关键区（Key area），关键区再细分为15个价值（Value）维度，价值维度再细分为27个胜任力（Competency）纬度。\n  技术技能（Technical skills） 交付（Delivery） 反馈、沟通和协作（Feedback，Communication，Collaboration） 领导力（Leadership） 战略性影响（Strategic Impact）  影响力范围 #  各个工程级别的最主要差异在所能hold住的工作的范围（scope），或者说影响力范围，其中： E1～E3属于独立贡献者（individual contributor），工作范围有限，偏任务执行（Execution of Work）。 E4～E6能够善用人力（一般要带团队）和产品等杠杆进行规模化的生产（Utilizing skills to scale and generate leverage）。 职级越高越偏向战略方向、理念和文化建设。\n E1：任务范围内 E2：项目范围内 E3：小组/团队内 E4：整个团队范围 E5：几个相关团队范围 E6：整个技术部门甚至公司  职级和胜任力评估框架 #   技术技能  质量和测试-写代码 质量和测试-测试 质量和测试-调试 质量和测试-可观测性 软件设计和架构-理解领域（domain） 软件设计和架构-软件架构 软件设计和架构-安全   交付  增量价值交付-任务分解 增量价值交付-优先级和依赖分析 增量价值交付-应对不确定性 自我组织-可信赖和责任感 自我组织-经济思维   反馈、沟通和协作  反馈-提供反馈 反馈-寻求和接收反馈 沟通-有效沟通 沟通-知识分享 协作-团队合作 协作-关系建设 协作-解决分歧   领导力  推进对齐 流程思考 协调促进 教导   战略性影响  业务敏锐和战略-业务敏锐 业务敏锐和战略-战略工作 业务敏锐和战略-产品思维    Demo #  软件设计和架构-软件架构：\n   职级 胜任力     E1 对服务化架构有总体认识，在此基础上能够设计基本的服务/模块，同时尽量避免冗余代码/功能，减少对接口的不兼容变更。   E2 设计的服务要和总体服务化架构对齐（align with）。   E3 设计的服务/系统和总体架构始终对齐。能高效地利用抽象、模块化和重用机制。   E4 使用行业沉淀下来的成熟的设计模式来架构服务和系统，让团队可以增量和自治的开发，并考虑未来的扩展性。考虑未来的可能用例场景，在做设计决策时，以最小化未来变更成本为主要目标（也就是架构要灵活适应未来的变化）。   E5 在多个团队之间宣导能支持增量和自治开发的，并且能支持未来扩展的架构文化。指导多个团队考虑未来的可能用例场景，在做设计决策时，以最小化未来的变更成本为主要目标。   E6 在整个组织内宣导能支持增量和自治开发的，并且能支持未来扩展的架构文化。指导组织内的所有团队考虑未来的可能用例场景，在做设计决策时，以最小化未来的变更成本为目标。    "},{"id":5,"href":"/posts/java/arthas/","title":"Arthas","section":"Blog","content":"Intro #  Java 诊断工具 Arthas 入门教程 https://start.aliyun.com/course?id=qDlgqpBT 进阶 命令 https://arthas.aliyun.com/doc/advanced-use.html Install #  wget https://arthas.aliyun.com/arthas-boot.jar  use java \u0026gt; 8 when jre tool.java\n Start #  java -jar arthas-boot.jar # input pid help dashboard thread 1 thread 1 | grep \u0026#39;main(\u0026#39; sc -d *MathGame # 查找JVM里已加载的类 jad demo.MathGame # 反编译代码 watch demo.MathGame primeFactors returnObj # 查看函数的参数/返回值/异常信息 "},{"id":6,"href":"/posts/algo/algo/","title":"算法总结","section":"Blog","content":"Intro #  重学算法，之前停留在学习基本思想比如 leetcode#704，但是问题衍生出来的实际问题直接看不懂 leetcode#475。 重新以实际题的方式去了解\n二分 #   单调性 000111找突变边界 使用主动与被动不同的视角看     704. 二分查找 https://leetcode-cn.com/problems/binary-search/   278. 第一个错误的版本 https://leetcode-cn.com/problems/first-bad-version/   475. 供暖器 https://leetcode-cn.com/problems/heaters/   540. 有序数组中的单一元素 https://leetcode-cn.com/problems/single-element-in-a-sorted-array/   240. 搜索二维矩阵 II https://leetcode-cn.com/problems/search-a-2d-matrix-ii/   875. 爱吃香蕉的珂珂 https://leetcode-cn.com/problems/koko-eating-bananas/   611. 有效三角形的个数 https://leetcode-cn.com/problems/valid-triangle-number/   1760. 袋子里最少数目的球 https://leetcode-cn.com/problems/minimum-limit-of-balls-in-a-bag/   300. 最长递增子序列 https://leetcode-cn.com/problems/longest-increasing-subsequence/   1011. 在 D 天内送达包裹的能力 https://leetcode-cn.com/problems/capacity-to-ship-packages-within-d-days/   动态规划 #  "},{"id":7,"href":"/posts/tool/hugo/","title":"hugo-book","section":"Blog","content":"Intro #  本站使用 博客系统hugo，搭配主题hugo-book\n hugo  https://gohugo.io/getting-started/quick-start/    hugo-book  官方demo https://hugo-book-demo.netlify.app/posts/migrate-from-jekyll/  代码demo https://github1s.com/alex-shpak/hugo-book     Start #  # 本地测试 hugo server -w # add hugo new posts/xxx.md Guide #  Intro Install Start Packages Contributing About License Test #  MacOS MacOS Content #  Linux Linux Content #  Windows Windows Content #   "},{"id":8,"href":"/posts/tool/vagrant/","title":"vagrant","section":"Blog","content":"Intro #  快速可自定义的虚拟机，几行命令搞定，不用再设置一堆东西。 自定义文件Vagrantfile实现环境重复利用 https://www.vagrantup.com/intro Install #  https://www.vagrantup.com/downloads # wget https://releases.hashicorp.com/vagrant/2.2.19/vagrant_2.2.19_x86_64.msi Start #  vagrant init generic/alpine312 # https://vagrantcloud.com/search vagrant up --provider=hyperv # start vagrant halt # stop vagrant ssh vagrant destroy # delete Other #  vagrant box list # list image vagrant global-status # list vm vagrant destroy 1a2b3c4d # 手动下包 wget https://app.vagrantup.com/generic/boxes/alpine312/versions/3.6.4/providers/hyperv.box vagrant box add my/alpine312 hyperv.box # 127.0.0.1:2222 # root vagrant Vagrantfile #  # touch Vagrantfile Vagrant.configure(\u0026#34;2\u0026#34;) do |config| config.vm.box = \u0026#34;generic/alpine312\u0026#34; end "},{"id":9,"href":"/posts/docker/php.dockerfile/","title":"php Dockerfile","section":"Blog","content":"2019.04.04 #  FROM php:7.1.11-fpm-alpine RUN apk add --no-cache freetype libpng libjpeg-turbo freetype-dev libpng-dev libjpeg-turbo-dev \\  \u0026amp;\u0026amp; apk add --no-cache --virtual .build-deps autoconf g++ libssh2 openssl openssl-dev make pcre-dev tree curl \\  \u0026amp;\u0026amp; apk add --no-cache postgresql-dev \\  \u0026amp;\u0026amp; docker-php-ext-configure gd \\  --with-gd \\  --with-freetype-dir=/usr/include/ \\  --with-png-dir=/usr/include/ \\  --with-jpeg-dir=/usr/include/ \\  \u0026amp;\u0026amp; pecl install mongodb-1.5.2 redis apcu xdebug \\  \u0026amp;\u0026amp; docker-php-ext-enable mongodb redis apcu xdebug \\  \u0026amp;\u0026amp; docker-php-ext-install gd pdo_mysql opcache bcmath pgsql pdo_pgsql zip sockets \\  \u0026amp;\u0026amp; apk del .build-deps \\  \u0026amp;\u0026amp; pecl clear-cache \\  \u0026amp;\u0026amp; docker-php-source delete RUN curl https://getcomposer.org/composer.phar -o /usr/local/bin/composer \\  \u0026amp;\u0026amp; chmod +x /usr/local/bin/composer \\  \u0026amp;\u0026amp; mkdir -p /var/runtime \u0026amp;\u0026amp; chmod -R 777 /var/runtime \\  \u0026amp;\u0026amp; alias ll=\u0026#39;ls -l\u0026#39; # COPY __cicd__/php/php.ini /usr/local/etc/php/ # COPY __cicd__/php/www.conf /usr/local/etc/php-fpm.d/ # docker build -f Dockerfile.php -t zx5435/php:7.1.11 . 2019.03.07 error #  librabbitmq pecl install amqp composer config -g repo.packagist composer https://packagist.phpcomposer.com 2018.10.09 bitdata #  FROM php:7.1.10-fpm-alpine RUN apk add --no-cache freetype libpng libjpeg-turbo freetype-dev libpng-dev libjpeg-turbo-dev \\  \u0026amp;\u0026amp; apk add --no-cache --virtual .build-deps autoconf g++ libssh2 openssl openssl-dev make pcre-dev \\  \u0026amp;\u0026amp; apk add --no-cache postgresql-dev \\  \u0026amp;\u0026amp; docker-php-ext-configure gd \\  --with-gd \\  --with-freetype-dir=/usr/include/ \\  --with-png-dir=/usr/include/ \\  --with-jpeg-dir=/usr/include/ \\  \u0026amp;\u0026amp; pecl install mongodb-1.5.2 redis apcu xdebug \\  \u0026amp;\u0026amp; docker-php-ext-enable mongodb redis apcu xdebug \\  \u0026amp;\u0026amp; docker-php-ext-install gd pdo_mysql opcache bcmath pgsql pdo_pgsql zip \\  \u0026amp;\u0026amp; apk del .build-deps \\  \u0026amp;\u0026amp; pecl clear-cache \\  \u0026amp;\u0026amp; docker-php-source delete RUN curl https://getcomposer.org/composer.phar -o /usr/local/bin/composer \\  \u0026amp;\u0026amp; chmod +x /usr/local/bin/composer \\  \u0026amp;\u0026amp; mkdir -p /var/runtime \u0026amp;\u0026amp; chmod -R 777 /var/runtime # COPY __cicd__/php/php.ini /usr/local/etc/php/ # COPY __cicd__/php/www.conf /usr/local/etc/php-fpm.d/ # docker build -f __cicd__/php/Dockerfile.runtime -t zx5435/php:7.1.10 . "}]